<!doctype HTML>
<html>
    <head>
        <title>Caricando la Realt√† Aumentata</title>
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    </head>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <!-- we import arjs version without NFT but with marker + location based support -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script>
        AFRAME.registerComponent("markerhandler", {
         init: function () {
            this.el.sceneEl.addEventListener("markerFound", () => {

                document.querySelector('#element_foto_profilo').emit('animation_foto_profilo');

                setTimeout(function(){ 
                    document.querySelector("#element_testo").setAttribute("visible",true);
                    document.querySelector('#element_testo').emit('animation_testo'); 
                }, 1000);

                setTimeout(function(){ 
                    document.querySelector('#element_innova_finance').emit('animation_innova_finance');
                    document.querySelector('#element_video').emit('animation_video');
                }, 2000);

                setTimeout(function(){ 
                    document.querySelector('#element_linkedin').emit('animation_linkedin');
                    document.querySelector('#element_website').emit('animation_website');
                    document.querySelector('#element_maps').emit('animation_maps');
                }, 4000);
            })
         }
        });

        AFRAME.registerComponent('clickhandler', {
        init: function() {
            this.el.addEventListener('click', () => {
                alert('Clicked!')
            });
        }});
    </script>

    <body style="margin : 0px; overflow: hidden;">
        <!-- we add detectionMode and matrixCodeType to tell AR.js to recognize barcode markers -->
        <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;">

            <a-assets>
                <img id="copertina" src="montanari tracking .jpg">
                <img id="innova_finance" src="innova finance.jpg">
                <img id="foto_profilo" src="profile png.png">
                <img id="linkedin" src="linkedIn logo.png">
                <img id="website" src="web logo.png">
                <img id="maps" src="maps logo.png">
                <img id="testo" src="testo.png">
                <video id="video" autoplay loop="true" src="video sample.mp4"></video>

            </a-assets>

            <a-marker markerhandler  type="barcode" value="6">
                <a-image id="element_testo" src="#testo" visible="false" rotation="280 0 0" scale="1 1 1" animation="property: position; to: -1.5 0 0; dur: 1000; easing: linear; loop: false; startEvents: animation_testo;"></a-image>
                <a-image id="element_foto_profilo" src="#foto_profilo" rotation="280 0 0" scale="1 1 1" animation="property: position; to: 1.5 0 0; dur: 1000; easing: linear; loop: false; startEvents: animation_foto_profilo"></a-image>


                <a-image  id="element_innova_finance" src="#innova_finance" position="-10 0 -1.1" rotation="280 0 0" scale="1.3 1 1" animation="property: position; to: -1 0 -1.1; dur: 2000; easing: easeOutExpo; loop: false; startEvents: animation_innova_finance" ></a-image>
                <a-video   id="element_video" src="#video" width="1.5" height="1" position="10 0 -1.1" rotation="280 0 0" animation="property: position; to: 1 0 -1.1; dur: 2000; easing: easeOutExpo; loop: false; startEvents: animation_video"></a-video>

                <a-image clickhandler id="element_linkedin" src="#linkedin"  rotation="280 0 0" scale="0.001 0.001 0.001" position="1.5 0 1" animation="property: scale; to: 0.7 0.7 0.7; dur: 2500; easing: linear; loop: false; startEvents: animation_linkedin"></a-image>
                <a-image id="element_website" src="#website"  rotation="280 0 0" scale="0.001 0.001 0.001" position="0 0 1" animation="property: scale; to: 0.7 0.7 0.7; dur: 2500; easing: linear; loop: false; startEvents: animation_website"></a-image>
                <a-image  id="element_maps" src="#maps"  rotation="280 0 0" scale="0.001 0.001 0.001" position="-1.5 0 1" animation="property: scale; to: 0.7 0.7 0.7; dur: 2500; easing: linear; loop: false; startEvents: animation_maps"></a-image>
            </a-marker>

            <a-entity camera></a-entity>
        </a-scene>
    </body>
</html>
